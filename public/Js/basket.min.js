//déclaration variables
const formulaireElt = document.getElementById("section-formulaire");
const totalPriceElt = document.getElementById("total-price");
const productName = document.getElementById("articleName");
const priceElt = document.getElementById("articlePrice");
const quantityElt = document.getElementById("articleQty");
const basketELt = document.getElementById("container-recapitulatif");

const positionElt = document.getElementById("articles");

const validation = document.getElementById("validate");
//--------affichage produit selectionner

//Déclaration de la variable "basket"dans laquelle on met les key et les values.
let basket = JSON.parse(window.localStorage.getItem("products"));

pageBasket();
function pageBasket() {
  // si le panier est vide
  if (basket === null) {
    const panierVide = `<main id="container-products-basket"><div class="empty-basket">Le panier est vide !</div></main>`;
    positionElt.innerHTML = panierVide;
  } else {
    //si le panier n'est pas vide: afficher les produits dans le LS
    let structureProductBasket = [];

    //faire boucle for pour parcourir mon LS et recupérer les objets

    for (k = 0; k < basket.length; k++) {
      structureProductBasket += `<div class="quantity"> Qauntité - ${basket[k].quantity}</div>
      <div class="name">  ${basket[k].article}</div> <div class="price">${basket[k].price} € - <button class="btn-delete">Supprimer</button></div>
`;
    }

    if (k == basket.length) {
      // injection html dans la page panier
      positionElt.innerHTML = structureProductBasket;
    }
  }
}
//-----------Fin de l'affichage des produits du panier-----------------------------------

//******************Gestion du bouton supprimer l'article*******************************************/

//---------------Sélection des références de tous les boutons btn-supprimer----------------------------------------

const btnDelete = document.querySelectorAll("btn-delete");
console.log(btnDelete);

//*************************************Le bouton pour vider le panier************************************************************************** */

////*********************************Le montant total du panier ******************************************************/
let priceTotalCalcul = [];
//Aller chercher les prix dans le panier
console.log("priceTotalCalcul:" + priceTotalCalcul);
for (let m = 0; m < basket.length; m++) {
  let priceProductInBasket = basket[m].price;
  //mettre les prix du panier dans la variable "priceTotalCalcul"

  priceTotalCalcul.push(priceProductInBasket);
  console.log("priceTotalCalcul");
}

// Additionner les prix qu'il ya dans le tableau de la variable "prix totale"---------
const reducer = (accumulator, currentValue) => accumulator + currentValue;
const totalPrice = priceTotalCalcul.reduce(reducer, 0);
console.log(totalPrice);

// le code html du prix total à afficher

const affichagePrixHtml = `

<div class ="affichage-prix-html">${totalPrice} € </div>`;
totalPriceElt.insertAdjacentHTML("beforeend", affichagePrixHtml);

// Initialisation des variables du formulaire

const firstNameElt = document.getElementById("firstName");

const lastNameElt = document.getElementById("lastName");

const emailElt = document.getElementById("email");
const addressElt = document.getElementById("address");

const cityElt = document.getElementById("city");

const btnOrderElt = document.getElementById("btn-order");
